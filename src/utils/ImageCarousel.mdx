import { useColorMode } from '@docusaurus/theme-common'
import { useState } from 'react';
import { ConfigProvider, theme, Carousel, Image, Card } from 'antd';
import { LeftOutlined, RightOutlined } from '@ant-design/icons';

export const CarouselGenerator = ({imageData}) => {
  // Thanks to Nathan Arritt: https://github.com/ant-design/ant-design/issues/12479#issuecomment-1071492637
  const Arrow = ({ currentSlide, direction, slideCount, ...carouselProps }) =>
  direction === 'left' ? (
    <LeftOutlined {...carouselProps} style={{ color: '#fff', fontSize: 24, width: 24, height: 24, zIndex: 1, left: 10 }} />
  ) : (
    <RightOutlined {...carouselProps} style={{ color: '#fff', fontSize: 24, width: 24, height: 24, zIndex: 1, right: 10 }} />
  );

  return(
    <Carousel
      // draggable // Image Preview Button prematurely triggers
      arrows
      prevArrow={<Arrow direction="left" />}
      nextArrow={<Arrow direction="right" />}
    >
      {imageData.map(datum => {
        return <Image
          key={datum.src}
          src={datum.src}
        />;
      })}
    </Carousel>
  );
};

export const TabbedCarouselGenerator = ({ tabMap }) => {
  const [activeTabKey, setActiveTabKey] = useState(Object.keys(tabMap)[0]);
  const {colorMode, setColorMode} = useColorMode();

  const onTabChange = (key) => {
    setActiveTabKey(key);
  };

  return(
    <ConfigProvider
      theme={{
        algorithm: colorMode === 'dark' ? theme.darkAlgorithm : theme.defaultAlgorithm
      }}
    >
      <Card
        tabList={
          Object.entries(tabMap).map(([key, tab]) => {
            return { key, label: tab.label };
          })
        }
        activeTabKey={activeTabKey}
        onTabChange={onTabChange}
      >
        {tabMap[activeTabKey].component}
      </Card>
    </ConfigProvider>
  );
};